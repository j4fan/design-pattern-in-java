# design-pattern-in-java
Java实现的设计模式Demo

```设计模式简介```

设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。

设计模式是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理地运用设计模式可以完美地解决很多问题，每种模式在现实中都有相应的原理来与之对应，每种模式都描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是设计模式能被广泛应用的原因。

```设计模式的六大原则```

1、开闭原则（Open Close Principle）

开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。

2、里氏代换原则（Liskov Substitution Principle）

里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。

3、依赖倒转原则（Dependence Inversion Principle）

这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。

4、接口隔离原则（Interface Segregation Principle）

这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。

5、迪米特法则，又称最少知道原则（Demeter Principle）

最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。

6、合成复用原则（Composite Reuse Principle）

合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。

1.工厂模式
---
工厂模式属于创建型模式，在DDD中也有重要的应用，在DDD模型中，用户或者客户端不需要关注领域层创建的具体细节，只需要传入参数or上下文，即可获得领域模型实例。

2.策略模式
---
策略模式属于行为型模式，通常有一个Context对象，该对象包含另外一个需要执行策略的对象，或者是一些入参，同时包含不同的行为策略。Context中传入不同策略，会使得对象有不同的表现。

本例子中采用简化过的砍价场景做示例。首先砍价上下文BargainExecutor可以传入一个Strategy,根据不同的策略可以对传入的砍价金额，砍价次数执行砍价，最终得到砍价金额。对于砍价策略的生成，这里也引入了枚举类和工厂方法，做到了更优雅的实现。代码中实现了简单随机砍价和微信红包砍价两种策略。

个人理解:策略模式的策略对外部不可见，策略接口和策略类，可以作为内部类实现，只需将策略工厂的生成枚举类暴露出去即可。这样可以把方法聚合在BargainExecutor上下文中，代码可读性更好。

3.观察者模式
---
观察者模式在事件驱动模型的代码中经常遇到，通常也是用于一对多的事件通知场景。对此jdk,spring框架都有各自的实现。

这里我也简单实现一个版本，首先有对象Subject(被观察对象),包含一个Observer的集合，有通知方法，添加观察者方法，设置状态变动方法,有多个观察者Observer,Observer有个方法update,用于被通知时执行。最后有一个Client用于初始化观察者和被观察者，进行绑定，更新状态。

个人思考:模型是一个被观察者对应多个观察者，反之不成立，在代码中为了表示这种一对多的关系，在具体的Observer的实现类中，用构造方法注入被观察者Subject。jdk的实现考虑到了并发情况，通过sychronized加锁，对于状态改变也是用当前值和更新值进行比较，考虑更加周到和完善。
